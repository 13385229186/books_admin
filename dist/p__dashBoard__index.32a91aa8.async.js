"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[577],{10216:function(st,$,a){a.r($),a.d($,{default:function(){return it}});var s=a(67294),L=a(71230),m=a(15746),A=a(5574),g=a.n(A),Z=a(2453),D=a(4393),B=a(55054),M=a(98721),N=a(66212),P=a(15009),h=a.n(P),G=a(99289),F=a.n(G),w=a(71052);function I(){return R.apply(this,arguments)}function R(){return R=F()(h()().mark(function d(){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w.h)("/api/admin/getBookOverview",{}));case 1:case"end":return t.stop()}},d)})),R.apply(this,arguments)}function z(){return b.apply(this,arguments)}function b(){return b=F()(h()().mark(function d(){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w.h)("/api/admin/getRecentRegistrations",{}));case 1:case"end":return t.stop()}},d)})),b.apply(this,arguments)}function H(){return O.apply(this,arguments)}function O(){return O=F()(h()().mark(function d(){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w.h)("/api/admin/getCreditDistribution",{}));case 1:case"end":return t.stop()}},d)})),O.apply(this,arguments)}function K(){return T.apply(this,arguments)}function T(){return T=F()(h()().mark(function d(){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w.h)("/api/admin/getBorrowCountByCategory",{}));case 1:case"end":return t.stop()}},d)})),T.apply(this,arguments)}var E={"dashboard-container":"dashboard-container___ZXeHf",overviewCard:"overviewCard___jnDRU","ant-statistic-title":"ant-statistic-title___C2F4v","ant-statistic-content":"ant-statistic-content___G6rtu",chartCard:"chartCard___Cdx3h","ant-card-head-title":"ant-card-head-title___ReyH1"},e=a(85893),U=function(){var l,t,u=(0,s.useState)(),p=g()(u,2),r=p[0],f=p[1],j=(0,s.useState)(!1),c=g()(j,2),x=c[0],C=c[1];return(0,s.useEffect)(function(){I().then(function(o){C(!0);try{if(o.status==="fail"){Z.ZP.error(o.msg);return}f(o.data)}finally{C(!1)}})},[]),(0,e.jsx)(D.Z,{title:"\u4E66\u7C4D\u6982\u89C8",loading:x,className:E.overviewCard,children:(0,e.jsxs)(L.Z,{gutter:16,children:[(0,e.jsx)(m.Z,{xs:24,sm:12,md:6,lg:6,xl:6,children:(0,e.jsx)(B.Z,{title:"\u603B\u85CF\u4E66\u91CF",value:(r==null?void 0:r.total)||0,prefix:(0,e.jsx)(M.Z,{})})}),(0,e.jsx)(m.Z,{xs:24,sm:12,md:6,lg:6,xl:6,children:(0,e.jsx)(B.Z,{title:"\u7535\u5B50\u4E66\u5360\u6BD4",value:(r==null||(l=r.ebookStats)===null||l===void 0?void 0:l.percentage)||0,suffix:"%",precision:2})}),(0,e.jsx)(m.Z,{xs:24,sm:12,md:6,lg:6,xl:6,children:(0,e.jsx)(B.Z,{title:"\u7EB8\u8D28\u4E66\u53EF\u501F\u5360\u6BD4",value:(r==null||(t=r.physicalStats)===null||t===void 0?void 0:t.percentage)||0,suffix:"%",precision:2})}),(0,e.jsx)(m.Z,{xs:24,sm:12,md:6,lg:6,xl:6,children:(0,e.jsx)(B.Z,{title:"\u903E\u671F\u672A\u8FD8",value:(r==null?void 0:r.overdue)||0,prefix:(0,e.jsx)(N.Z,{})})})]})})},W=U,X=a(97857),S=a.n(X),J=a(80652),Q=function(){var l=(0,s.useState)(),t=g()(l,2),u=t[0],p=t[1],r=(0,s.useState)(!1),f=g()(r,2),j=f[0],c=f[1];(0,s.useEffect)(function(){z().then(function(o){c(!0);try{if(o.status==="fail"){Z.ZP.error(o.msg);return}p(o.data)}finally{c(!1)}})},[]);var x=s.useMemo(function(){if(!u)return[];var o=new Map;u.forEach(function(i){o.set(i.date,i.count)});var n=Array.from({length:7},function(i,v){var y=new Date;return y.setDate(y.getDate()-(6-v)),y.toISOString().split("T")[0]});return n.map(function(i){return{date:i,count:o.get(i)||0}})},[u]),C={data:x,xField:"date",yField:"count",height:300,point:{size:4,shape:"circle"},interaction:{tooltip:{marker:!1}},style:{lineWidth:2}};return(0,e.jsx)(D.Z,{title:"\u8FD17\u5929\u7528\u6237\u6CE8\u518C\u8D8B\u52BF",loading:j,className:E.chartCard,children:(0,e.jsx)(J.Z,S()({},C))})},V=Q,Y=a(63430),k=function(){var l=(0,s.useState)(),t=g()(l,2),u=t[0],p=t[1],r=(0,s.useState)(!1),f=g()(r,2),j=f[0],c=f[1];(0,s.useEffect)(function(){H().then(function(n){c(!0);try{if(n.status==="fail"){Z.ZP.error(n.msg);return}p(n.data)}finally{c(!1)}})},[]);var x=[{name:"\u4F18\u79C0",des:"80\u5206\u4EE5\u4E0A"},{name:"\u826F\u597D",des:"80\u523050\u5206"},{name:"\u5F85\u63D0\u5347",des:"50\u5206\u4EE5\u4E0B"}],C=s.useMemo(function(){return u?x.map(function(n){return{name:n.name,value:u[n.name]||0}}):x.map(function(n){return S()(S()({},n),{},{value:0})})},[u]),o={data:C,angleField:"value",colorField:"name",label:{text:function(i){return"".concat(i.name,`
 `).concat(i.value)},position:"outside"},legend:{color:{title:!1,position:"right",rowPadding:5}},height:300,interaction:{tooltip:{series:!0}},tooltip:{title:function(i){var v;return i.name+"\uFF1A"+((v=x.find(function(y){return y.name===i.name}))===null||v===void 0?void 0:v.des)},items:["value"]}};return(0,e.jsx)(D.Z,{title:"\u7528\u6237\u4FE1\u7528\u5206\u5E03",loading:j,className:E.chartCard,children:(0,e.jsx)(Y.Z,S()({},o))})},q=k,_=a(96074),tt=a(96068),et=a(78677),at=function(){var l=(0,s.useState)(),t=g()(l,2),u=t[0],p=t[1],r=(0,s.useState)(!1),f=g()(r,2),j=f[0],c=f[1];(0,s.useEffect)(function(){K().then(function(n){c(!0);try{if(n.status==="fail"){Z.ZP.error(n.msg);return}p(n.data)}finally{c(!1)}})},[]);var x=s.useMemo(function(){return u?u.filter(function(n){return n.borrow_count>0}):[]},[u]),C={data:u,xField:"name",yField:"borrow_count",height:400,label:{style:{fill:"#FFFFFF"}},xAxis:{label:{autoRotate:!0}},meta:{name:{alias:"\u5206\u7C7B\u540D\u79F0"},borrow_count:{alias:"\u501F\u9605\u91CF"}},color:function(i){var v=i.name,y=["#1890ff","#52c41a","#722ed1","#13c2c2","#f5222d","#fa8c16","#eb2f96","#a0d911"];return y[v.length%y.length]}},o=[{title:"\u5206\u7C7B\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u501F\u9605\u91CF",dataIndex:"borrow_count",key:"borrow_count",sorter:function(i,v){return i.borrow_count-v.borrow_count}}];return(0,e.jsxs)(D.Z,{title:"\u5206\u7C7B\u501F\u9605\u6392\u884C\u699C",loading:j,className:E.chartCard,children:[(0,e.jsx)(et.Z,S()({},C)),(0,e.jsx)(_.Z,{}),(0,e.jsx)(tt.Z,{dataSource:u,columns:o,pagination:!1,size:"small",rowKey:"name"})]})},nt=at,rt=function(){return(0,e.jsx)("div",{className:"dashboard-container",children:(0,e.jsxs)(L.Z,{gutter:[16,16],children:[(0,e.jsx)(m.Z,{xs:24,sm:24,md:24,lg:24,xl:24,children:(0,e.jsx)(W,{})}),(0,e.jsx)(m.Z,{xs:24,sm:24,md:16,lg:16,xl:16,children:(0,e.jsx)(V,{})}),(0,e.jsx)(m.Z,{xs:24,sm:24,md:8,lg:8,xl:8,children:(0,e.jsx)(q,{})}),(0,e.jsx)(m.Z,{span:24,children:(0,e.jsx)(nt,{})})]})})},it=rt}}]);
