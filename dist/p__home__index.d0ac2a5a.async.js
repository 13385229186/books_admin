"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[500],{64540:function(ce,X,r){r.d(X,{Z:function(){return z}});var h=r(71471),c=r(83062),w=r(4393),x=r(94272),A=r(28846),b=(0,A.kc)(function(O){var I=O.token;return{card:{position:"relative",borderRadius:"8px",transition:"all 0.3s ease",overflow:"hidden",".ant-card-cover":{position:"relative"},".ant-card-meta-title":{marginBottom:"4px","& > a":{display:"inline-block",maxWidth:"100%",color:I.colorTextHeading}},".ant-card-meta-description":{height:"44px",overflow:"hidden",lineHeight:"22px"},"&:hover":{".ant-card-meta-title > a":{color:I.colorPrimary}}},cardItemContent:{display:"flex",height:"20px",marginTop:"16px",marginBottom:"-4px",lineHeight:"20px","& > span":{flex:"1",color:I.colorTextSecondary,fontSize:"12px"}}}}),Q=b,j=r(3826),M=r(58780),d=r(85893),E=h.Z.Paragraph,P=function(I){var g=I.data,W=I.showRecommendBadge,T=W===void 0?!1:W,D=I.rank,k=Q(),a=k.styles,l=function(){var t,i;if(!T||!D||D>3)return null;var H=[{emoji:"\u{1F44D}",color:"#ffcc00"},{emoji:"\u{1F44D}",color:"#c0c0c0"},{emoji:"\u{1F44D}",color:"#cd7f32"}];return(0,d.jsx)(c.Z,{title:"\u63A8\u8350\u6307\u6570\u7B2C".concat(D,"\u540D"),children:(0,d.jsx)("div",{style:{position:"absolute",cursor:"pointer",top:10,right:20,fontSize:24,zIndex:10,textShadow:"0 0 8px ".concat(((t=H[D-1])===null||t===void 0?void 0:t.color)||"#999"),lineHeight:1},children:((i=H[D-1])===null||i===void 0?void 0:i.emoji)||"\u2B50"})})};return(0,d.jsxs)(d.Fragment,{children:[l(),(0,d.jsxs)(w.Z,{className:a.card,hoverable:!0,onClick:function(){(0,j.Cg)(g.id),x.history.push("/book/detail/".concat(g.id))},cover:g.cover?(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)("img",{style:{width:"100%",height:"200px",objectFit:"cover",objectPosition:"center",display:"block",borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},alt:g.title,src:(0,M.OR)(g.cover)})}):(0,d.jsx)("div",{style:{width:"100%",height:"200px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgb(0.5, 0.5, 0.5, 0.2)"},children:"\u6682\u65E0\u5C01\u9762"}),children:[(0,d.jsx)(w.Z.Meta,{title:(0,d.jsx)("a",{children:g.title}),description:(0,d.jsx)(E,{ellipsis:{rows:2},children:g.intro||"\u6682\u65E0\u7B80\u4ECB"})}),(0,d.jsx)("div",{className:a.cardItemContent,children:(0,d.jsx)("span",{children:g.author})})]})]})},z=P},40057:function(ce,X,r){r.r(X),r.d(X,{default:function(){return ue}});var h=r(15009),c=r.n(h),w=r(97857),x=r.n(w),A=r(99289),b=r.n(A),Q=r(5574),j=r.n(Q),M=r(71471),d=r(2453),E=r(4393),P=r(71230),z=r(15746),O=r(83622),I=r(74330),g=r(2487),W=r(66309),T=r(94272),D=r(64540),k=r(3826),a=r(67294),l={container:"container___zbKMv",welcomeCard:"welcomeCard___RJ5dU","ant-card-body":"ant-card-body___PTExC","ant-typography":"ant-typography___XjnzD","ant-typography-secondary":"ant-typography-secondary___oCOei","ant-btn":"ant-btn___IgaZD",contentRow:"contentRow___eFu6O","ant-col":"ant-col___ZQiXG",recommendCard:"recommendCard___dLUXS","ant-card-head":"ant-card-head___Yw5bh","ant-card-head-title":"ant-card-head-title___OohQW","ant-card-extra":"ant-card-extra___bY6fG",hotCard:"hotCard___qO63s",hotListItem:"hotListItem___cvRYa",bookLink:"bookLink___jgnAC","ant-list-item-meta":"ant-list-item-meta___AoaTO","ant-list-item-meta-title":"ant-list-item-meta-title___IsLe7","ant-list-item-meta-description":"ant-list-item-meta-description___tuHUW","ant-row":"ant-row___Fenlg"},f=r(58780),t=r(85893),i=M.Z.Title,H=M.Z.Text,de=function(){var L=new Date().getHours();return L<5?"\u591C\u6DF1\u4E86":L<9?"\u65E9\u5B89":L<12?"\u4E0A\u5348\u597D":L<14?"\u5348\u5B89":L<18?"\u4E0B\u5348\u597D":L<24?"\u665A\u4E0A\u597D":"\u4F60\u597D"},ue=function(){var re,L=(0,T.useModel)("@@initialState"),te=L.initialState,e=(0,a.useState)([]),s=j()(e,2),u=s[0],n=s[1],o=(0,a.useState)([]),R=j()(o,2),v=R[0],V=R[1],F=(0,a.useState)(!1),U=j()(F,2),N=U[0],Y=U[1],G=(0,a.useState)(!1),_=j()(G,2),ae=_[0],Z=_[1],ne=(0,a.useState)({current:1,pageSize:8,total:0}),J=j()(ne,2),K=J[0],le=J[1],oe=function(){var $=b()(c()().mark(function m(y,C){var p;return c()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return Z(!0),S.prev=1,S.next=4,(0,k.DY)({current:y,pageSize:C});case 4:p=S.sent,p.status==="success"?(n(p.data.data),le(function(ie){return x()(x()({},ie),{},{total:p.data.total,current:y})})):d.ZP.error(p.msg),S.next=11;break;case 8:S.prev=8,S.t0=S.catch(1),d.ZP.error("\u83B7\u53D6\u63A8\u8350\u4E66\u7C4D\u5931\u8D25");case 11:return S.prev=11,Z(!1),S.finish(11);case 14:case"end":return S.stop()}},m,null,[[1,8,11,14]])}));return function(y,C){return $.apply(this,arguments)}}(),se=function(){var $=b()(c()().mark(function m(){var y;return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,(0,k.pF)((0,f.cz)({pageSize:10,current:1}));case 3:y=p.sent,y.status==="success"?V(y.data.data):d.ZP.error(y.msg),p.next=10;break;case 7:p.prev=7,p.t0=p.catch(0),d.ZP.error("\u83B7\u53D6\u70ED\u95E8\u4E66\u7C4D\u5931\u8D25");case 10:case"end":return p.stop()}},m,null,[[0,7]])}));return function(){return $.apply(this,arguments)}}(),me=function(){var $=b()(c()().mark(function m(){return c()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return Y(!0),C.next=3,Promise.all([oe(1,K.pageSize),se()]);case 3:Y(!1);case 4:case"end":return C.stop()}},m)}));return function(){return $.apply(this,arguments)}}(),B=function(){var m=K.current+1,y=Math.ceil(K.total/K.pageSize),C=m>y?1:m;oe(C,K.pageSize)};return(0,a.useEffect)(function(){me()},[]),(0,t.jsxs)("div",{className:l.container,children:[(0,t.jsx)(E.Z,{className:l.welcomeCard,variant:"borderless",children:(0,t.jsxs)(P.Z,{align:"middle",justify:"space-between",children:[(0,t.jsxs)(z.Z,{children:[(0,t.jsxs)(i,{level:3,style:{marginBottom:0},children:[de(),"\uFF0C",(te==null||(re=te.currentUser)===null||re===void 0?void 0:re.username)||"\u8BFB\u8005","\uFF01"]}),(0,t.jsxs)(H,{type:"secondary",children:["\u4ECA\u65E5\u4E3A\u4F60\u63A8\u8350\u4E86",u.length,"\u672C\u597D\u4E66"]})]}),(0,t.jsx)(z.Z,{children:(0,t.jsx)(O.ZP,{type:"primary",size:"large",onClick:function(){return T.history.push("/book/list")},children:"\u53BB\u627E\u4E66 \u2192"})})]})}),(0,t.jsxs)(P.Z,{gutter:24,className:l.contentRow,children:[(0,t.jsx)(z.Z,{span:16,children:(0,t.jsx)(E.Z,{title:"\u4E3A\u4F60\u63A8\u8350",loading:N,className:l.recommendCard,extra:(0,t.jsx)(O.ZP,{onClick:B,loading:N,children:"\u6362\u4E00\u6279"}),children:(0,t.jsx)(I.Z,{spinning:ae,children:(0,t.jsx)(P.Z,{gutter:[16,24],children:u.map(function($,m){return(0,t.jsx)(z.Z,{xs:24,sm:12,md:8,lg:6,children:(0,t.jsx)(D.Z,{data:$,showRecommendBadge:m<3,rank:m+1})},$.id)})})})})}),(0,t.jsx)(z.Z,{span:8,children:(0,t.jsx)(E.Z,{title:"\u70ED\u95E8\u4E66\u7C4D",loading:N,className:l.hotCard,children:(0,t.jsx)(g.Z,{itemLayout:"horizontal",dataSource:v,renderItem:function(m,y){var C;return(0,t.jsx)(g.Z.Item,{className:l.hotListItem,actions:[(0,t.jsxs)(W.Z,{color:"volcano",className:l.heatTag,children:[((C=m.heatScore)===null||C===void 0?void 0:C.toFixed(2))||"0.00"," \u70ED\u5EA6"]},"heat")],onClick:function(){(0,k.Cg)(m.id),T.history.push("/book/detail/".concat(m.id))},children:(0,t.jsx)(g.Z.Item.Meta,{title:(0,t.jsxs)("a",{className:l.bookLink,children:[(0,t.jsxs)("span",{className:l.rankBadge,children:[y+1,". "]}),m.title]}),description:(0,t.jsx)(H,{type:"secondary",ellipsis:!0,children:m.author})})})}})})})]})]})}},3826:function(ce,X,r){r.d(X,{pF:function(){return M},DY:function(){return Q},zO:function(){return D},Iq:function(){return W},Ym:function(){return I},Cg:function(){return z}});var h=r(15009),c=r.n(h),w=r(99289),x=r.n(w),A=r(71052),b=function(a){return a.VIEW="VIEW",a.READ_ONLINE="READ_ONLINE",a.DOWNLOAD="DOWNLOAD",a.BORROW="BORROW",a}({});function Q(a){return j.apply(this,arguments)}function j(){return j=x()(c()().mark(function a(l){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,A.h)("/api/user/recommendations",l));case 1:case"end":return t.stop()}},a)})),j.apply(this,arguments)}function M(a){return d.apply(this,arguments)}function d(){return d=x()(c()().mark(function a(l){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,A.h)("/api/user/hotBookList",l));case 1:case"end":return t.stop()}},a)})),d.apply(this,arguments)}function E(a){return P.apply(this,arguments)}function P(){return P=x()(c()().mark(function a(l){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,A.h)("/api/user/recordBehavior",l));case 1:case"end":return t.stop()}},a)})),P.apply(this,arguments)}function z(a){return O.apply(this,arguments)}function O(){return O=x()(c()().mark(function a(l){var f;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return f={bookId:l,behaviorType:b.VIEW},i.abrupt("return",E(f));case 2:case"end":return i.stop()}},a)})),O.apply(this,arguments)}function I(a){return g.apply(this,arguments)}function g(){return g=x()(c()().mark(function a(l){var f;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return f={bookId:l,behaviorType:b.READ_ONLINE},i.abrupt("return",E(f));case 2:case"end":return i.stop()}},a)})),g.apply(this,arguments)}function W(a){return T.apply(this,arguments)}function T(){return T=x()(c()().mark(function a(l){var f;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return f={bookId:l,behaviorType:b.DOWNLOAD},i.abrupt("return",E(f));case 2:case"end":return i.stop()}},a)})),T.apply(this,arguments)}function D(a){return k.apply(this,arguments)}function k(){return k=x()(c()().mark(function a(l){var f;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return f={bookId:l,behaviorType:b.BORROW},i.abrupt("return",E(f));case 2:case"end":return i.stop()}},a)})),k.apply(this,arguments)}},66309:function(ce,X,r){r.d(X,{Z:function(){return te}});var h=r(67294),c=r(93967),w=r.n(c),x=r(98423),A=r(98787),b=r(69760),Q=r(96159),j=r(45353),M=r(53124),d=r(11568),E=r(20111),P=r(14747),z=r(83262),O=r(83559);const I=e=>{const{paddingXXS:s,lineWidth:u,tagPaddingHorizontal:n,componentCls:o,calc:R}=e,v=R(n).sub(u).equal(),V=R(s).sub(u).equal();return{[o]:Object.assign(Object.assign({},(0,P.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:v,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,d.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:V,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:v}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},g=e=>{const{lineWidth:s,fontSizeIcon:u,calc:n}=e,o=e.fontSizeSM;return(0,z.IX)(e,{tagFontSize:o,tagLineHeight:(0,d.bf)(n(e.lineHeightSM).mul(o).equal()),tagIconSize:n(u).sub(n(s).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},W=e=>({defaultBg:new E.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var T=(0,O.I$)("Tag",e=>{const s=g(e);return I(s)},W),D=function(e,s){var u={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(u[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)s.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(u[n[o]]=e[n[o]]);return u},a=h.forwardRef((e,s)=>{const{prefixCls:u,style:n,className:o,checked:R,onChange:v,onClick:V}=e,F=D(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:U,tag:N}=h.useContext(M.E_),Y=J=>{v==null||v(!R),V==null||V(J)},G=U("tag",u),[_,ae,Z]=T(G),ne=w()(G,`${G}-checkable`,{[`${G}-checkable-checked`]:R},N==null?void 0:N.className,o,ae,Z);return _(h.createElement("span",Object.assign({},F,{ref:s,style:Object.assign(Object.assign({},n),N==null?void 0:N.style),className:ne,onClick:Y})))}),l=r(98719);const f=e=>(0,l.Z)(e,(s,u)=>{let{textColor:n,lightBorderColor:o,lightColor:R,darkColor:v}=u;return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:n,background:R,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:v,borderColor:v},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var t=(0,O.bk)(["Tag","preset"],e=>{const s=g(e);return f(s)},W);function i(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const H=(e,s,u)=>{const n=i(u);return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:e[`color${u}`],background:e[`color${n}Bg`],borderColor:e[`color${n}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var de=(0,O.bk)(["Tag","status"],e=>{const s=g(e);return[H(s,"success","Success"),H(s,"processing","Info"),H(s,"error","Error"),H(s,"warning","Warning")]},W),ue=function(e,s){var u={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(u[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)s.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(u[n[o]]=e[n[o]]);return u};const L=h.forwardRef((e,s)=>{const{prefixCls:u,className:n,rootClassName:o,style:R,children:v,icon:V,color:F,onClose:U,bordered:N=!0,visible:Y}=e,G=ue(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:_,direction:ae,tag:Z}=h.useContext(M.E_),[ne,J]=h.useState(!0),K=(0,x.Z)(G,["closeIcon","closable"]);h.useEffect(()=>{Y!==void 0&&J(Y)},[Y]);const le=(0,A.o2)(F),oe=(0,A.yT)(F),se=le||oe,me=Object.assign(Object.assign({backgroundColor:F&&!se?F:void 0},Z==null?void 0:Z.style),R),B=_("tag",u),[$,m,y]=T(B),C=w()(B,Z==null?void 0:Z.className,{[`${B}-${F}`]:se,[`${B}-has-color`]:F&&!se,[`${B}-hidden`]:!ne,[`${B}-rtl`]:ae==="rtl",[`${B}-borderless`]:!N},n,o,m,y),p=ee=>{ee.stopPropagation(),U==null||U(ee),!ee.defaultPrevented&&J(!1)},[,ge]=(0,b.Z)((0,b.w)(e),(0,b.w)(Z),{closable:!1,closeIconRender:ee=>{const Ce=h.createElement("span",{className:`${B}-close-icon`,onClick:p},ee);return(0,Q.wm)(ee,Ce,q=>({onClick:pe=>{var he;(he=q==null?void 0:q.onClick)===null||he===void 0||he.call(q,pe),p(pe)},className:w()(q==null?void 0:q.className,`${B}-close-icon`)}))}}),S=typeof G.onClick=="function"||v&&v.type==="a",ie=V||null,ve=ie?h.createElement(h.Fragment,null,ie,v&&h.createElement("span",null,v)):v,fe=h.createElement("span",Object.assign({},K,{ref:s,className:C,style:me}),ve,ge,le&&h.createElement(t,{key:"preset",prefixCls:B}),oe&&h.createElement(de,{key:"status",prefixCls:B}));return $(S?h.createElement(j.Z,{component:"Tag"},fe):fe)});L.CheckableTag=a;var te=L}}]);
