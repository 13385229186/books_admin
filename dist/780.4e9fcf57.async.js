"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[780],{95663:function(x,I,n){var y=n(15009),t=n.n(y),C=n(99289),l=n.n(C),c=n(5574),b=n.n(c),E=n(67294),K=n(17788),i=n(2453),W=n(66309),g=n(55241),A=n(63783),d=n(85893),k=function(B){var _=B.status,L=B.configs,T=B.onChange,h=B.disabled,p=h===void 0?!1:h,U=(0,E.useState)(!1),D=b()(U,2),v=D[0],m=D[1],R=(0,E.useState)(!1),O=b()(R,2),S=O[0],s=O[1],w=(0,E.useState)(!1),P=b()(w,2),r=P[0],u=P[1],a=L.find(function(f){return f.value===_}),e=function(){var f=l()(t()().mark(function Y(M){var Z,F;return t()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(T){$.next=2;break}return $.abrupt("return");case 2:try{F='\u786E\u5B9A\u8981\u5C06\u72B6\u6001\u4FEE\u6539\u4E3A"'.concat((Z=L.find(function(J){return J.value===M}))===null||Z===void 0?void 0:Z.label,'"\u5417?'),K.Z.confirm({title:"\u64CD\u4F5C\u786E\u8BA4",icon:(0,d.jsx)(A.Z,{}),content:F,okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var J=l()(t()().mark(function z(){return t()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return m(!0),G.next=3,T(M);case 3:u(!1),i.ZP.success("\u72B6\u6001\u66F4\u65B0\u6210\u529F"),m(!1);case 6:case"end":return G.stop()}},z)}));function V(){return J.apply(this,arguments)}return V}()})}catch(J){console.error("\u72B6\u6001\u66F4\u65B0\u5931\u8D25:",J),i.ZP.error("\u72B6\u6001\u66F4\u65B0\u5931\u8D25")}finally{m(!1)}case 3:case"end":return $.stop()}},Y)}));return function(M){return f.apply(this,arguments)}}(),o=(0,d.jsx)("div",{style:{padding:8},children:L.map(function(f){return(0,d.jsx)(W.Z,{color:f.color,style:{cursor:"pointer",marginBottom:4,opacity:f.value===_?.5:1},onClick:function(){return e(f.value)},children:f.label},f.value)})});return(0,d.jsx)(g.Z,{content:o,trigger:"click",open:!p&&S,onOpenChange:s,placement:"bottom",children:(0,d.jsx)(W.Z,{color:(a==null?void 0:a.color)||"default",style:{cursor:p?"default":"pointer",borderStyle:p?"solid":"dashed",opacity:v?.7:1},children:v?"\u5904\u7406\u4E2D...":(a==null?void 0:a.label)||_})})};I.Z=k},20780:function(x,I,n){var y=n(15009),t=n.n(y),C=n(99289),l=n.n(C),c=n(5574),b=n.n(c),E=n(2453),K=n(85265),i=n(26412),W=n(68997),g=n(66309),A=n(41874),d=n(67294),k=n(87766),j=n(58780),B=n(95663),_=n(85893),L=function(h){var p,U,D=h.userId,v=h.userData,m=h.visible,R=h.onClose,O=(0,d.useState)(v),S=b()(O,2),s=S[0],w=S[1],P=(0,d.useState)(!1),r=b()(P,2),u=r[0],a=r[1];return(0,d.useEffect)(function(){if(m){if(v){w(v);return}D&&(a(!0),(0,A.GA)({userId:D}).then(function(e){e.status==="success"?w(e.data):E.ZP.error(e.msg||"\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25")}).catch(function(e){console.error("\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25:",e),E.ZP.error("\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25")}).finally(function(){return a(!1)}))}else w(void 0)},[m,D,v]),(0,_.jsx)(K.Z,{width:600,open:m,onClose:R,title:"\u7528\u6237\u8BE6\u60C5",loading:u,destroyOnClose:!0,children:s?(0,_.jsxs)(i.Z,{column:1,bordered:!0,children:[(0,_.jsx)(i.Z.Item,{label:"\u5934\u50CF",children:(0,_.jsx)(W.Z,{src:s.avatar?(0,j.OR)(s.avatar):"",size:64,children:((p=s.name)===null||p===void 0?void 0:p.charAt(0))||((U=s.username)===null||U===void 0?void 0:U.charAt(0))})}),(0,_.jsx)(i.Z.Item,{label:"\u7528\u6237\u540D",children:s.username||"-"}),(0,_.jsx)(i.Z.Item,{label:"\u59D3\u540D",children:s.name||"-"}),(0,_.jsx)(i.Z.Item,{label:"\u7535\u8BDD",children:s.phone||"-"}),(0,_.jsx)(i.Z.Item,{label:"\u89D2\u8272",children:s.role?(0,_.jsx)(g.Z,{color:"blue",children:s.role}):"-"}),(0,_.jsx)(i.Z.Item,{label:"\u72B6\u6001",children:s.status&&k.zG.find(function(e){return e.value===s.status})?(0,_.jsx)(B.Z,{status:s.status,configs:k.zG,onChange:function(){var e=l()(t()().mark(function o(f){return t()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,A.az)({userId:s.id,status:f}).then(function(Z){if(Z.status==="fail")throw Error("\u7528\u6237\u72B6\u6001\u4FEE\u6539\u5931\u8D25")});case 2:R();case 3:case"end":return M.stop()}},o)}));return function(o){return e.apply(this,arguments)}}()}):"-"}),(0,_.jsx)(i.Z.Item,{label:"\u4FE1\u7528\u5206",children:s.creditScore!==void 0?(0,_.jsx)(g.Z,{color:s.creditScore>=80?"green":s.creditScore>=50?"orange":"red",children:s.creditScore}):"-"}),(0,_.jsx)(i.Z.Item,{label:"\u6CE8\u518C\u65F6\u95F4",children:s.createdAt?new Date(s.createdAt).toLocaleString():"-"}),(0,_.jsx)(i.Z.Item,{label:"\u66F4\u65B0\u65F6\u95F4",children:s.updatedAt?new Date(s.updatedAt).toLocaleString():"-"})]}):(0,_.jsx)("div",{children:"\u6682\u65E0\u7528\u6237\u6570\u636E"})})};I.Z=L},87766:function(x,I,n){n.d(I,{J0:function(){return t},WZ:function(){return y},zG:function(){return C}});var y=[{value:"ADMIN",label:"\u7BA1\u7406\u5458",color:"red"},{value:"USER",label:"\u666E\u901A\u7528\u6237",color:"blue"}],t=function(l){return l.ACTIVE="ACTIVE",l.DISABLED="DISABLED",l.LOCKED="LOCKED",l.DELETED="DELETED",l}({}),C=[{value:t.ACTIVE,label:"\u6B63\u5E38",color:"green"},{value:t.DISABLED,label:"\u5C01\u63A7",color:"orange"},{value:t.LOCKED,label:"\u9501\u5B9A",color:"red"},{value:t.DELETED,label:"\u6CE8\u9500",color:"gray"}]},41874:function(x,I,n){n.d(I,{GA:function(){return A},Gg:function(){return B},UL:function(){return h},Z$:function(){return L},az:function(){return w},cn:function(){return S},lE:function(){return R},rn:function(){return v},x4:function(){return b},yC:function(){return U},z2:function(){return K}});var y=n(15009),t=n.n(y),C=n(99289),l=n.n(C),c=n(71052);function b(r){return E.apply(this,arguments)}function E(){return E=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.h)("/api/user/login",u));case 1:case"end":return e.stop()}},r)})),E.apply(this,arguments)}function K(r){return i.apply(this,arguments)}function i(){return i=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.h)("/api/user/register",u));case 1:case"end":return e.stop()}},r)})),i.apply(this,arguments)}function W(r){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function r(u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",api("/api/user/getCurrentUser",u));case 1:case"end":return e.stop()}},r)})),g.apply(this,arguments)}function A(r){return d.apply(this,arguments)}function d(){return d=l()(t()().mark(function r(u){var a;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=new FormData,a.append("userId",u.userId),o.abrupt("return",(0,c.h)("/api/admin/getUserById",a));case 3:case"end":return o.stop()}},r)})),d.apply(this,arguments)}function k(){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",api("/api/user/outLogin",null));case 1:case"end":return a.stop()}},r)})),j.apply(this,arguments)}function B(r){return _.apply(this,arguments)}function _(){return _=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.h)("/api/user/borrowListByUser",u));case 1:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function L(r){return T.apply(this,arguments)}function T(){return T=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.h)("/api/user/violationListByUser",u));case 1:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function h(r){return p.apply(this,arguments)}function p(){return p=l()(t()().mark(function r(u){var a;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=new FormData,a.append("borrowId",u.borrowId),o.abrupt("return",(0,c.h)("/api/user/cancelBorrowBook",a));case 3:case"end":return o.stop()}},r)})),p.apply(this,arguments)}function U(r){return D.apply(this,arguments)}function D(){return D=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.h)("/api/user/borrowListByUser",u));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function v(r){return m.apply(this,arguments)}function m(){return m=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.x)("/api/user/updateInfo",{},{avatarData:u.avatarData},{data:u.updateData,fieldName:"updateData"}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function R(r){return O.apply(this,arguments)}function O(){return O=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.h)("/api/admin/userList",u));case 1:case"end":return e.stop()}},r)})),O.apply(this,arguments)}function S(r){return s.apply(this,arguments)}function s(){return s=l()(t()().mark(function r(u){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.h)("/api/admin/addUser",u));case 1:case"end":return e.stop()}},r)})),s.apply(this,arguments)}function w(r){return P.apply(this,arguments)}function P(){return P=l()(t()().mark(function r(u){var a;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=new FormData,a.append("userId",u.userId),a.append("status",u.status),o.abrupt("return",(0,c.h)("/api/admin/changeStatus",a));case 4:case"end":return o.stop()}},r)})),P.apply(this,arguments)}}}]);
