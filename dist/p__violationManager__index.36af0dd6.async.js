"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[796],{19761:function(ae,y,e){e.r(y),e.d(y,{default:function(){return G}});var V=e(15009),f=e.n(V),A=e(99289),I=e.n(A),B=e(5574),v=e.n(B),o=e(67294),x=e(90930),Z=e(73580),w=e(83622),M=e(66309),p=e(2453),O=e(71052);function Y(s){return c.apply(this,arguments)}function c(){return c=I()(f()().mark(function s(g){return f()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,O.h)("/api/admin/violationList",g));case 1:case"end":return u.stop()}},s)})),c.apply(this,arguments)}var h=function(s){return s.LOST="LOST",s.OVERDUE="OVERDUE",s.EXPIRED="EXPIRED",s}({}),S=[{value:h.LOST,label:"\u4E66\u7C4D\u4E22\u5931",color:"red"},{value:h.OVERDUE,label:"\u903E\u671F\u672A\u8FD8",color:"orange"},{value:h.EXPIRED,label:"\u9884\u7EA6\u8FC7\u671F",color:"blue"}],m=e(58780),z=e(20780),X=e(93409),n=e(85893),F=function(){var g=(0,o.useRef)(),C=(0,o.useState)(!1),u=v()(C,2),W=u[0],R=u[1],$=(0,o.useState)(null),T=v()($,2),d=T[0],K=T[1],k=(0,o.useState)(!1),E=v()(k,2),H=E[0],j=E[1],J=(0,o.useState)(null),b=v()(J,2),D=b[0],N=b[1],Q=(0,o.useState)(!1),L=v()(Q,2),q=L[0],P=L[1],_=function(a,t){K({id:a,data:t}),j(!0)},ee=function(a){N(a),P(!0)},te=[{title:"ID",dataIndex:"id",key:"id",width:60,hideInSearch:!0},{title:"\u7528\u6237",dataIndex:"name",key:"name",width:150,render:function(a,t){return(0,n.jsx)(w.ZP,{type:"link",onClick:function(){return _(t.userId)},style:{padding:0,textAlign:"left"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:t.name}),(0,n.jsx)("div",{style:{color:"#888"},children:t.phone})]})})}},{title:"\u624B\u673A\u53F7",dataIndex:"phone",hideInTable:!0},{title:"\u4E66\u7C4D",dataIndex:"title",key:"title",ellipsis:!0,render:function(a){return(0,n.jsx)("span",{style:{fontWeight:500},children:a})}},{title:"\u8FDD\u89C4\u7C7B\u578B",dataIndex:"violationType",key:"violationType",valueType:"select",fieldProps:{options:S},render:function(a,t){var i=S.find(function(U){return U.value===t.violationType});return i?(0,n.jsx)(M.Z,{color:i.color,children:i.label}):"\u672A\u77E5\u7C7B\u578B: ".concat(t.violationType)}},{title:"\u5173\u8054\u501F\u9605ID",dataIndex:"borrowId",key:"borrowId",hideInSearch:!0,render:function(a,t){return(0,n.jsxs)("a",{onClick:function(){return ee(t)},children:["#",a]})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt",key:"createdAt",valueType:"date",fieldProps:{format:"YYYY-MM-DD"},render:function(a,t){return t.createdAt?(0,m.o0)(new Date(t.createdAt)):"-"}}],re=function(){var l=I()(f()().mark(function a(t){var i;return f()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=(0,m.cz)(t),R(!0),r.prev=2,r.next=5,Y(t);case 5:if(i=r.sent,i.status!=="fail"){r.next=9;break}return p.ZP.error(i.msg),r.abrupt("return",{data:[],success:!1});case 9:return r.abrupt("return",i.data);case 12:return r.prev=12,r.t0=r.catch(2),console.error("\u83B7\u53D6\u8FDD\u89C4\u5217\u8868\u5931\u8D25:",r.t0),p.ZP.error("\u83B7\u53D6\u8FDD\u89C4\u5217\u8868\u5931\u8D25"),r.abrupt("return",{data:[],success:!1});case 17:return r.prev=17,R(!1),r.finish(17);case 20:case"end":return r.stop()}},a,null,[[2,12,17,20]])}));return function(t){return l.apply(this,arguments)}}();return(0,n.jsxs)(x._z,{children:[(0,n.jsx)(Z.Z,{headerTitle:"\u8FDD\u89C4\u8BB0\u5F55\u5217\u8868",loading:W,actionRef:g,columns:te,request:re,rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},pagination:{pageSize:5},toolBarRender:function(){return[]}}),(0,n.jsx)(z.Z,{userId:d==null?void 0:d.id,userData:d==null?void 0:d.data,visible:H,onClose:function(){return j(!1)}}),(0,n.jsx)(X.Z,{visible:q,onCancel:function(){return P(!1)},borrowId:D==null?void 0:D.borrowId})]})},G=F}}]);
