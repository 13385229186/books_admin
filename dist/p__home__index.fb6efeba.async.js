"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[500],{64540:function(ue,G,t){t.d(G,{Z:function(){return F}});var g=t(5574),d=t.n(g),w=t(71471),x=t(83062),z=t(4393),S=t(48054),Q=t(67294),j=t(94272),H=t(28846),O=(0,H.kc)(function(R){var B=R.token;return{card:{position:"relative",borderRadius:"8px",transition:"all 0.3s ease",overflow:"hidden",".ant-card-cover":{position:"relative"},".ant-card-meta-title":{marginBottom:"4px","& > a":{display:"inline-block",maxWidth:"100%",color:B.colorTextHeading}},".ant-card-meta-description":{height:"44px",overflow:"hidden",lineHeight:"22px"},"&:hover":{".ant-card-meta-title > a":{color:B.colorPrimary}}},cardItemContent:{display:"flex",height:"20px",marginTop:"16px",marginBottom:"-4px",lineHeight:"20px","& > span":{flex:"1",color:B.colorTextSecondary,fontSize:"12px"}}}}),Z=O,D=t(3826),A=t(58780),u=t(85893),J=w.Z.Paragraph,I=function(B){var f=B.data,a=B.showRecommendBadge,l=a===void 0?!1:a,m=B.rank,r=Z(),c=r.styles,k=(0,Q.useState)(!1),te=d()(k,2),ne=te[0],K=te[1],T=function(){var e,o;if(!l||!m||m>3)return null;var i=[{emoji:"\u{1F44D}",color:"#ffcc00"},{emoji:"\u{1F44D}",color:"#c0c0c0"},{emoji:"\u{1F44D}",color:"#cd7f32"}];return(0,u.jsx)(x.Z,{title:"\u63A8\u8350\u6307\u6570\u7B2C".concat(m,"\u540D"),children:(0,u.jsx)("div",{style:{position:"absolute",cursor:"pointer",top:10,right:20,fontSize:24,zIndex:10,textShadow:"0 0 8px ".concat(((e=i[m-1])===null||e===void 0?void 0:e.color)||"#999"),lineHeight:1},children:((o=i[m-1])===null||o===void 0?void 0:o.emoji)||"\u2B50"})})};return(0,u.jsxs)(u.Fragment,{children:[T(),(0,u.jsxs)(z.Z,{className:c.card,hoverable:!0,onClick:function(){(0,D.Cg)(f.id),j.history.push("/book/detail/".concat(f.id))},cover:f.cover?(0,u.jsxs)("div",{style:{position:"relative"},children:[!ne&&(0,u.jsx)(S.Z.Avatar,{active:!0,style:{width:"100%",height:"200px",borderRadius:0}}),(0,u.jsx)("img",{style:{width:"100%",height:"200px",objectFit:"cover",objectPosition:"center",display:"block",borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},alt:f.title,src:(0,A.OR)(f.cover),onLoad:function(){return K(!0)}})]}):(0,u.jsx)("div",{style:{width:"100%",height:"200px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgb(0.5, 0.5, 0.5, 0.2)"},children:"\u6682\u65E0\u5C01\u9762"}),children:[(0,u.jsx)(z.Z.Meta,{title:(0,u.jsx)("a",{children:f.title}),description:(0,u.jsx)(J,{ellipsis:{rows:2},children:f.intro||"\u6682\u65E0\u7B80\u4ECB"})}),(0,u.jsx)("div",{className:c.cardItemContent,children:(0,u.jsx)("span",{children:f.author})})]})]})},F=I},40057:function(ue,G,t){t.r(G),t.d(G,{default:function(){return ne}});var g=t(15009),d=t.n(g),w=t(97857),x=t.n(w),z=t(99289),S=t.n(z),Q=t(5574),j=t.n(Q),H=t(71471),O=t(2453),Z=t(4393),D=t(71230),A=t(15746),u=t(83622),J=t(74330),I=t(2487),F=t(66309),R=t(94272),B=t(64540),f=t(3826),a=t(67294),l={container:"container___zbKMv",welcomeCard:"welcomeCard___RJ5dU","ant-card-body":"ant-card-body___PTExC","ant-typography":"ant-typography___XjnzD","ant-typography-secondary":"ant-typography-secondary___oCOei","ant-btn":"ant-btn___IgaZD",contentRow:"contentRow___eFu6O","ant-col":"ant-col___ZQiXG",recommendCard:"recommendCard___dLUXS","ant-card-head":"ant-card-head___Yw5bh","ant-card-head-title":"ant-card-head-title___OohQW","ant-card-extra":"ant-card-extra___bY6fG",hotCard:"hotCard___qO63s",hotListItem:"hotListItem___cvRYa",bookLink:"bookLink___jgnAC","ant-list-item-meta":"ant-list-item-meta___AoaTO","ant-list-item-meta-title":"ant-list-item-meta-title___IsLe7","ant-list-item-meta-description":"ant-list-item-meta-description___tuHUW","ant-row":"ant-row___Fenlg"},m=t(58780),r=t(85893),c=H.Z.Title,k=H.Z.Text,te=function(){var T=new Date().getHours();return T<5?"\u591C\u6DF1\u4E86":T<9?"\u65E9\u5B89":T<12?"\u4E0A\u5348\u597D":T<14?"\u5348\u5B89":T<18?"\u4E0B\u5348\u597D":T<24?"\u665A\u4E0A\u597D":"\u4F60\u597D"},ne=function(){var K,T=(0,R.useModel)("@@initialState"),X=T.initialState,e=(0,a.useState)([]),o=j()(e,2),i=o[0],n=o[1],s=(0,a.useState)([]),$=j()(s,2),p=$[0],M=$[1],W=(0,a.useState)(!1),U=j()(W,2),L=U[0],Y=U[1],V=(0,a.useState)(!1),re=j()(V,2),oe=re[0],P=re[1],se=(0,a.useState)({current:1,pageSize:8,total:0}),q=j()(se,2),_=q[0],ce=q[1],le=function(){var N=S()(d()().mark(function h(C,y){var v;return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return P(!0),b.prev=1,b.next=4,(0,f.DY)({current:C,pageSize:y});case 4:v=b.sent,v.status==="success"?(n(v.data.data),ce(function(de){return x()(x()({},de),{},{total:v.data.total,current:C})})):O.ZP.error(v.msg),b.next=11;break;case 8:b.prev=8,b.t0=b.catch(1),O.ZP.error("\u83B7\u53D6\u63A8\u8350\u4E66\u7C4D\u5931\u8D25");case 11:return b.prev=11,P(!1),b.finish(11);case 14:case"end":return b.stop()}},h,null,[[1,8,11,14]])}));return function(C,y){return N.apply(this,arguments)}}(),ie=function(){var N=S()(d()().mark(function h(){var C;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,(0,f.pF)((0,m.cz)({pageSize:10,current:1}));case 3:C=v.sent,C.status==="success"?M(C.data.data):O.ZP.error(C.msg),v.next=10;break;case 7:v.prev=7,v.t0=v.catch(0),O.ZP.error("\u83B7\u53D6\u70ED\u95E8\u4E66\u7C4D\u5931\u8D25");case 10:case"end":return v.stop()}},h,null,[[0,7]])}));return function(){return N.apply(this,arguments)}}(),me=function(){var N=S()(d()().mark(function h(){return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return Y(!0),y.next=3,Promise.all([le(1,_.pageSize),ie()]);case 3:Y(!1);case 4:case"end":return y.stop()}},h)}));return function(){return N.apply(this,arguments)}}(),E=function(){var h=_.current+1,C=Math.ceil(_.total/_.pageSize),y=h>C?1:h;le(y,_.pageSize)};return(0,a.useEffect)(function(){me()},[]),(0,r.jsxs)("div",{className:l.container,children:[(0,r.jsx)(Z.Z,{className:l.welcomeCard,variant:"borderless",children:(0,r.jsxs)(D.Z,{align:"middle",justify:"space-between",children:[(0,r.jsxs)(A.Z,{children:[(0,r.jsxs)(c,{level:3,style:{marginBottom:0},children:[te(),"\uFF0C",(X==null||(K=X.currentUser)===null||K===void 0?void 0:K.username)||"\u8BFB\u8005","\uFF01"]}),(0,r.jsxs)(k,{type:"secondary",children:["\u4ECA\u65E5\u4E3A\u4F60\u63A8\u8350\u4E86",i.length,"\u672C\u597D\u4E66"]})]}),(0,r.jsx)(A.Z,{children:(0,r.jsx)(u.ZP,{type:"primary",size:"large",onClick:function(){return R.history.push("/book/list")},children:"\u53BB\u627E\u4E66 \u2192"})})]})}),(0,r.jsxs)(D.Z,{gutter:24,className:l.contentRow,children:[(0,r.jsx)(A.Z,{span:16,children:(0,r.jsx)(Z.Z,{title:"\u4E3A\u4F60\u63A8\u8350",loading:L,className:l.recommendCard,extra:(0,r.jsx)(u.ZP,{onClick:E,loading:L,children:"\u6362\u4E00\u6279"}),children:(0,r.jsx)(J.Z,{spinning:oe,children:(0,r.jsx)(D.Z,{gutter:[16,24],children:i.map(function(N,h){return(0,r.jsx)(A.Z,{xs:24,sm:12,md:8,lg:6,children:(0,r.jsx)(B.Z,{data:N,showRecommendBadge:h<3,rank:h+1})},N.id)})})})})}),(0,r.jsx)(A.Z,{span:8,children:(0,r.jsx)(Z.Z,{title:"\u70ED\u95E8\u4E66\u7C4D",loading:L,className:l.hotCard,children:(0,r.jsx)(I.Z,{itemLayout:"horizontal",dataSource:p,renderItem:function(h,C){var y;return(0,r.jsx)(I.Z.Item,{className:l.hotListItem,actions:[(0,r.jsxs)(F.Z,{color:"volcano",className:l.heatTag,children:[((y=h.heatScore)===null||y===void 0?void 0:y.toFixed(2))||"0.00"," \u70ED\u5EA6"]},"heat")],onClick:function(){(0,f.Cg)(h.id),R.history.push("/book/detail/".concat(h.id))},children:(0,r.jsx)(I.Z.Item.Meta,{title:(0,r.jsxs)("a",{className:l.bookLink,children:[(0,r.jsxs)("span",{className:l.rankBadge,children:[C+1,". "]}),h.title]}),description:(0,r.jsx)(k,{type:"secondary",ellipsis:!0,children:h.author})})})}})})})]})]})}},3826:function(ue,G,t){t.d(G,{pF:function(){return H},DY:function(){return Q},zO:function(){return B},Iq:function(){return F},Ym:function(){return J},Cg:function(){return A}});var g=t(15009),d=t.n(g),w=t(99289),x=t.n(w),z=t(71052),S=function(a){return a.VIEW="VIEW",a.READ_ONLINE="READ_ONLINE",a.DOWNLOAD="DOWNLOAD",a.BORROW="BORROW",a}({});function Q(a){return j.apply(this,arguments)}function j(){return j=x()(d()().mark(function a(l){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,z.h)("/api/user/recommendations",l));case 1:case"end":return r.stop()}},a)})),j.apply(this,arguments)}function H(a){return O.apply(this,arguments)}function O(){return O=x()(d()().mark(function a(l){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,z.h)("/api/user/hotBookList",l));case 1:case"end":return r.stop()}},a)})),O.apply(this,arguments)}function Z(a){return D.apply(this,arguments)}function D(){return D=x()(d()().mark(function a(l){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,z.h)("/api/user/recordBehavior",l));case 1:case"end":return r.stop()}},a)})),D.apply(this,arguments)}function A(a){return u.apply(this,arguments)}function u(){return u=x()(d()().mark(function a(l){var m;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m={bookId:l,behaviorType:S.VIEW},c.abrupt("return",Z(m));case 2:case"end":return c.stop()}},a)})),u.apply(this,arguments)}function J(a){return I.apply(this,arguments)}function I(){return I=x()(d()().mark(function a(l){var m;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m={bookId:l,behaviorType:S.READ_ONLINE},c.abrupt("return",Z(m));case 2:case"end":return c.stop()}},a)})),I.apply(this,arguments)}function F(a){return R.apply(this,arguments)}function R(){return R=x()(d()().mark(function a(l){var m;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m={bookId:l,behaviorType:S.DOWNLOAD},c.abrupt("return",Z(m));case 2:case"end":return c.stop()}},a)})),R.apply(this,arguments)}function B(a){return f.apply(this,arguments)}function f(){return f=x()(d()().mark(function a(l){var m;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m={bookId:l,behaviorType:S.BORROW},c.abrupt("return",Z(m));case 2:case"end":return c.stop()}},a)})),f.apply(this,arguments)}},66309:function(ue,G,t){t.d(G,{Z:function(){return X}});var g=t(67294),d=t(93967),w=t.n(d),x=t(98423),z=t(98787),S=t(69760),Q=t(96159),j=t(45353),H=t(53124),O=t(11568),Z=t(20111),D=t(14747),A=t(83262),u=t(83559);const J=e=>{const{paddingXXS:o,lineWidth:i,tagPaddingHorizontal:n,componentCls:s,calc:$}=e,p=$(n).sub(i).equal(),M=$(o).sub(i).equal();return{[s]:Object.assign(Object.assign({},(0,D.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:p,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,O.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${s}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${s}-close-icon`]:{marginInlineStart:M,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${s}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${s}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:p}}),[`${s}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},I=e=>{const{lineWidth:o,fontSizeIcon:i,calc:n}=e,s=e.fontSizeSM;return(0,A.IX)(e,{tagFontSize:s,tagLineHeight:(0,O.bf)(n(e.lineHeightSM).mul(s).equal()),tagIconSize:n(i).sub(n(o).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},F=e=>({defaultBg:new Z.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var R=(0,u.I$)("Tag",e=>{const o=I(e);return J(o)},F),B=function(e,o){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i},a=g.forwardRef((e,o)=>{const{prefixCls:i,style:n,className:s,checked:$,onChange:p,onClick:M}=e,W=B(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:U,tag:L}=g.useContext(H.E_),Y=q=>{p==null||p(!$),M==null||M(q)},V=U("tag",i),[re,oe,P]=R(V),se=w()(V,`${V}-checkable`,{[`${V}-checkable-checked`]:$},L==null?void 0:L.className,s,oe,P);return re(g.createElement("span",Object.assign({},W,{ref:o,style:Object.assign(Object.assign({},n),L==null?void 0:L.style),className:se,onClick:Y})))}),l=t(98719);const m=e=>(0,l.Z)(e,(o,i)=>{let{textColor:n,lightBorderColor:s,lightColor:$,darkColor:p}=i;return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:n,background:$,borderColor:s,"&-inverse":{color:e.colorTextLightSolid,background:p,borderColor:p},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var r=(0,u.bk)(["Tag","preset"],e=>{const o=I(e);return m(o)},F);function c(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const k=(e,o,i)=>{const n=c(i);return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:e[`color${i}`],background:e[`color${n}Bg`],borderColor:e[`color${n}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var te=(0,u.bk)(["Tag","status"],e=>{const o=I(e);return[k(o,"success","Success"),k(o,"processing","Info"),k(o,"error","Error"),k(o,"warning","Warning")]},F),ne=function(e,o){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i};const T=g.forwardRef((e,o)=>{const{prefixCls:i,className:n,rootClassName:s,style:$,children:p,icon:M,color:W,onClose:U,bordered:L=!0,visible:Y}=e,V=ne(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:re,direction:oe,tag:P}=g.useContext(H.E_),[se,q]=g.useState(!0),_=(0,x.Z)(V,["closeIcon","closable"]);g.useEffect(()=>{Y!==void 0&&q(Y)},[Y]);const ce=(0,z.o2)(W),le=(0,z.yT)(W),ie=ce||le,me=Object.assign(Object.assign({backgroundColor:W&&!ie?W:void 0},P==null?void 0:P.style),$),E=re("tag",i),[N,h,C]=R(E),y=w()(E,P==null?void 0:P.className,{[`${E}-${W}`]:ie,[`${E}-has-color`]:W&&!ie,[`${E}-hidden`]:!se,[`${E}-rtl`]:oe==="rtl",[`${E}-borderless`]:!L},n,s,h,C),v=ae=>{ae.stopPropagation(),U==null||U(ae),!ae.defaultPrevented&&q(!1)},[,ge]=(0,S.Z)((0,S.w)(e),(0,S.w)(P),{closable:!1,closeIconRender:ae=>{const ye=g.createElement("span",{className:`${E}-close-icon`,onClick:v},ae);return(0,Q.wm)(ae,ye,ee=>({onClick:fe=>{var he;(he=ee==null?void 0:ee.onClick)===null||he===void 0||he.call(ee,fe),v(fe)},className:w()(ee==null?void 0:ee.className,`${E}-close-icon`)}))}}),b=typeof V.onClick=="function"||p&&p.type==="a",de=M||null,pe=de?g.createElement(g.Fragment,null,de,p&&g.createElement("span",null,p)):p,ve=g.createElement("span",Object.assign({},_,{ref:o,className:y,style:me}),pe,ge,ce&&g.createElement(r,{key:"preset",prefixCls:E}),le&&g.createElement(te,{key:"status",prefixCls:E}));return N(b?g.createElement(j.Z,{component:"Tag"},ve):ve)});T.CheckableTag=a;var X=T}}]);
