"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[500],{64540:function(de,V,r){r.d(V,{Z:function(){return N}});var h=r(71471),c=r(83062),A=r(4393),S=r(51180),W=r(94272),b=r(28846),Y=(0,b.kc)(function(G){var v=G.token;return{card:{position:"relative",borderRadius:"8px",transition:"all 0.3s ease",overflow:"hidden",".ant-card-cover":{position:"relative"},".ant-card-meta-title":{marginBottom:"4px","& > a":{display:"inline-block",maxWidth:"100%",color:v.colorTextHeading}},".ant-card-meta-description":{height:"44px",overflow:"hidden",lineHeight:"22px"},"&:hover":{".ant-card-meta-title > a":{color:v.colorPrimary}}},cardItemContent:{display:"flex",height:"20px",marginTop:"16px",marginBottom:"-4px",lineHeight:"20px","& > span":{flex:"1",color:v.colorTextSecondary,fontSize:"12px"}}}}),I=Y,k=r(3826),R=r(58780),d=r(85893),z=h.Z.Paragraph,D=function(v){var C=v.data,B=v.showRecommendBadge,Q=B===void 0?!1:B,j=v.rank,n=I(),l=n.styles,g=function(){var i,L;if(!Q||!j||j>3)return null;var _=[{emoji:"\u{1F44D}",color:"#ffcc00"},{emoji:"\u{1F44D}",color:"#c0c0c0"},{emoji:"\u{1F44D}",color:"#cd7f32"}];return(0,d.jsx)(c.Z,{title:"\u63A8\u8350\u6307\u6570\u7B2C".concat(j,"\u540D"),children:(0,d.jsx)("div",{style:{position:"absolute",cursor:"pointer",top:10,right:20,fontSize:24,zIndex:10,textShadow:"0 0 8px ".concat(((i=_[j-1])===null||i===void 0?void 0:i.color)||"#999"),lineHeight:1},children:((L=_[j-1])===null||L===void 0?void 0:L.emoji)||"\u2B50"})})};return(0,d.jsxs)(d.Fragment,{children:[g(),(0,d.jsxs)(A.Z,{className:l.card,hoverable:!0,onClick:function(){(0,k.Cg)(C.id),W.history.push("/book/detail/".concat(C.id))},cover:C.cover?(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)(S.Z,{style:{width:"100%",height:"200px",objectFit:"cover",objectPosition:"center",display:"block",borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},preview:!1,src:(0,R.OR)(C.cover),alt:C.title})}):(0,d.jsx)("div",{style:{width:"100%",height:"200px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgb(0.5, 0.5, 0.5, 0.2)"},children:"\u6682\u65E0\u5C01\u9762"}),children:[(0,d.jsx)(A.Z.Meta,{title:(0,d.jsx)("a",{children:C.title}),description:(0,d.jsx)(z,{ellipsis:{rows:2},children:C.intro||"\u6682\u65E0\u7B80\u4ECB"})}),(0,d.jsx)("div",{className:l.cardItemContent,children:(0,d.jsx)("span",{children:C.author})})]})]})},N=D},40057:function(de,V,r){r.r(V),r.d(V,{default:function(){return ue}});var h=r(15009),c=r.n(h),A=r(97857),S=r.n(A),W=r(99289),b=r.n(W),Y=r(5574),I=r.n(Y),k=r(71471),R=r(2453),d=r(4393),z=r(71230),D=r(15746),N=r(83622),G=r(74330),v=r(2487),C=r(66309),B=r(94272),Q=r(64540),j=r(3826),n=r(67294),l={container:"container___zbKMv",welcomeCard:"welcomeCard___RJ5dU","ant-card-body":"ant-card-body___PTExC","ant-typography":"ant-typography___XjnzD","ant-typography-secondary":"ant-typography-secondary___oCOei","ant-btn":"ant-btn___IgaZD",contentRow:"contentRow___eFu6O","ant-col":"ant-col___ZQiXG",recommendCard:"recommendCard___dLUXS","ant-card-head":"ant-card-head___Yw5bh","ant-card-head-title":"ant-card-head-title___OohQW","ant-card-extra":"ant-card-extra___bY6fG",hotCard:"hotCard___qO63s",hotListItem:"hotListItem___cvRYa",bookLink:"bookLink___jgnAC","ant-list-item-meta":"ant-list-item-meta___AoaTO","ant-list-item-meta-title":"ant-list-item-meta-title___IsLe7","ant-list-item-meta-description":"ant-list-item-meta-description___tuHUW","ant-row":"ant-row___Fenlg"},g=r(58780),t=r(85893),i=k.Z.Title,L=k.Z.Text,_=function(){var w=new Date().getHours();return w<5?"\u591C\u6DF1\u4E86":w<9?"\u65E9\u5B89":w<12?"\u4E0A\u5348\u597D":w<14?"\u5348\u5B89":w<18?"\u4E0B\u5348\u597D":w<24?"\u665A\u4E0A\u597D":"\u4F60\u597D"},ue=function(){var te,w=(0,B.useModel)("@@initialState"),ae=w.initialState,e=(0,n.useState)([]),s=I()(e,2),u=s[0],a=s[1],o=(0,n.useState)([]),$=I()(o,2),p=$[0],F=$[1],H=(0,n.useState)(!1),X=I()(H,2),Z=X[0],U=X[1],M=(0,n.useState)(!1),ee=I()(M,2),ne=ee[0],P=ee[1],oe=(0,n.useState)({current:1,pageSize:8,total:0}),J=I()(oe,2),K=J[0],ie=J[1],se=function(){var T=b()(c()().mark(function m(x,y){var f;return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return P(!0),O.prev=1,O.next=4,(0,j.DY)({current:x,pageSize:y});case 4:f=O.sent,f.status==="success"?(a(f.data.data),ie(function(ce){return S()(S()({},ce),{},{total:f.data.total,current:x})})):R.ZP.error(f.msg),O.next=11;break;case 8:O.prev=8,O.t0=O.catch(1),R.ZP.error("\u83B7\u53D6\u63A8\u8350\u4E66\u7C4D\u5931\u8D25");case 11:return O.prev=11,P(!1),O.finish(11);case 14:case"end":return O.stop()}},m,null,[[1,8,11,14]])}));return function(x,y){return T.apply(this,arguments)}}(),le=function(){var T=b()(c()().mark(function m(){var x;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,(0,j.pF)((0,g.cz)({pageSize:10,current:1}));case 3:x=f.sent,x.status==="success"?F(x.data.data):R.ZP.error(x.msg),f.next=10;break;case 7:f.prev=7,f.t0=f.catch(0),R.ZP.error("\u83B7\u53D6\u70ED\u95E8\u4E66\u7C4D\u5931\u8D25");case 10:case"end":return f.stop()}},m,null,[[0,7]])}));return function(){return T.apply(this,arguments)}}(),me=function(){var T=b()(c()().mark(function m(){return c()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return U(!0),y.next=3,Promise.all([se(1,K.pageSize),le()]);case 3:U(!1);case 4:case"end":return y.stop()}},m)}));return function(){return T.apply(this,arguments)}}(),E=function(){var m=K.current+1,x=Math.ceil(K.total/K.pageSize),y=m>x?1:m;se(y,K.pageSize)};return(0,n.useEffect)(function(){me()},[]),(0,t.jsxs)("div",{className:l.container,children:[(0,t.jsx)(d.Z,{className:l.welcomeCard,variant:"borderless",children:(0,t.jsxs)(z.Z,{align:"middle",justify:"space-between",children:[(0,t.jsxs)(D.Z,{children:[(0,t.jsxs)(i,{level:3,style:{marginBottom:0},children:[_(),"\uFF0C",(ae==null||(te=ae.currentUser)===null||te===void 0?void 0:te.username)||"\u8BFB\u8005","\uFF01"]}),(0,t.jsxs)(L,{type:"secondary",children:["\u4ECA\u65E5\u4E3A\u4F60\u63A8\u8350\u4E86",u.length,"\u672C\u597D\u4E66"]})]}),(0,t.jsx)(D.Z,{children:(0,t.jsx)(N.ZP,{type:"primary",size:"large",onClick:function(){return B.history.push("/book/list")},children:"\u53BB\u627E\u4E66 \u2192"})})]})}),(0,t.jsxs)(z.Z,{gutter:24,className:l.contentRow,children:[(0,t.jsx)(D.Z,{span:16,children:(0,t.jsx)(d.Z,{title:"\u4E3A\u4F60\u63A8\u8350",loading:Z,className:l.recommendCard,extra:(0,t.jsx)(N.ZP,{onClick:E,loading:Z,children:"\u6362\u4E00\u6279"}),children:(0,t.jsx)(G.Z,{spinning:ne,children:(0,t.jsx)(z.Z,{gutter:[16,24],children:u.map(function(T,m){return(0,t.jsx)(D.Z,{xs:24,sm:12,md:8,lg:6,children:(0,t.jsx)(Q.Z,{data:T,showRecommendBadge:m<3,rank:m+1})},T.id)})})})})}),(0,t.jsx)(D.Z,{span:8,children:(0,t.jsx)(d.Z,{title:"\u70ED\u95E8\u4E66\u7C4D",loading:Z,className:l.hotCard,children:(0,t.jsx)(v.Z,{itemLayout:"horizontal",dataSource:p,renderItem:function(m,x){var y;return(0,t.jsx)(v.Z.Item,{className:l.hotListItem,actions:[(0,t.jsxs)(C.Z,{color:"volcano",className:l.heatTag,children:[((y=m.heatScore)===null||y===void 0?void 0:y.toFixed(2))||"0.00"," \u70ED\u5EA6"]},"heat")],onClick:function(){(0,j.Cg)(m.id),B.history.push("/book/detail/".concat(m.id))},children:(0,t.jsx)(v.Z.Item.Meta,{title:(0,t.jsxs)("a",{className:l.bookLink,children:[(0,t.jsxs)("span",{className:l.rankBadge,children:[x+1,". "]}),m.title]}),description:(0,t.jsx)(L,{type:"secondary",ellipsis:!0,children:m.author})})})}})})})]})]})}},3826:function(de,V,r){r.d(V,{pF:function(){return k},DY:function(){return Y},zO:function(){return Q},Iq:function(){return C},Ym:function(){return G},Cg:function(){return D}});var h=r(15009),c=r.n(h),A=r(99289),S=r.n(A),W=r(71052),b=function(n){return n.VIEW="VIEW",n.READ_ONLINE="READ_ONLINE",n.DOWNLOAD="DOWNLOAD",n.BORROW="BORROW",n}({});function Y(n){return I.apply(this,arguments)}function I(){return I=S()(c()().mark(function n(l){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,W.h)("/api/user/recommendations",l));case 1:case"end":return t.stop()}},n)})),I.apply(this,arguments)}function k(n){return R.apply(this,arguments)}function R(){return R=S()(c()().mark(function n(l){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,W.h)("/api/user/hotBookList",l));case 1:case"end":return t.stop()}},n)})),R.apply(this,arguments)}function d(n){return z.apply(this,arguments)}function z(){return z=S()(c()().mark(function n(l){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,W.h)("/api/user/recordBehavior",l));case 1:case"end":return t.stop()}},n)})),z.apply(this,arguments)}function D(n){return N.apply(this,arguments)}function N(){return N=S()(c()().mark(function n(l){var g;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return g={bookId:l,behaviorType:b.VIEW},i.abrupt("return",d(g));case 2:case"end":return i.stop()}},n)})),N.apply(this,arguments)}function G(n){return v.apply(this,arguments)}function v(){return v=S()(c()().mark(function n(l){var g;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return g={bookId:l,behaviorType:b.READ_ONLINE},i.abrupt("return",d(g));case 2:case"end":return i.stop()}},n)})),v.apply(this,arguments)}function C(n){return B.apply(this,arguments)}function B(){return B=S()(c()().mark(function n(l){var g;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return g={bookId:l,behaviorType:b.DOWNLOAD},i.abrupt("return",d(g));case 2:case"end":return i.stop()}},n)})),B.apply(this,arguments)}function Q(n){return j.apply(this,arguments)}function j(){return j=S()(c()().mark(function n(l){var g;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return g={bookId:l,behaviorType:b.BORROW},i.abrupt("return",d(g));case 2:case"end":return i.stop()}},n)})),j.apply(this,arguments)}},66309:function(de,V,r){r.d(V,{Z:function(){return ae}});var h=r(67294),c=r(93967),A=r.n(c),S=r(98423),W=r(98787),b=r(69760),Y=r(96159),I=r(45353),k=r(53124),R=r(11568),d=r(20111),z=r(14747),D=r(83262),N=r(83559);const G=e=>{const{paddingXXS:s,lineWidth:u,tagPaddingHorizontal:a,componentCls:o,calc:$}=e,p=$(a).sub(u).equal(),F=$(s).sub(u).equal();return{[o]:Object.assign(Object.assign({},(0,z.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:p,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,R.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:F,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:p}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},v=e=>{const{lineWidth:s,fontSizeIcon:u,calc:a}=e,o=e.fontSizeSM;return(0,D.IX)(e,{tagFontSize:o,tagLineHeight:(0,R.bf)(a(e.lineHeightSM).mul(o).equal()),tagIconSize:a(u).sub(a(s).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},C=e=>({defaultBg:new d.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var B=(0,N.I$)("Tag",e=>{const s=v(e);return G(s)},C),Q=function(e,s){var u={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(u[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)s.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(u[a[o]]=e[a[o]]);return u},n=h.forwardRef((e,s)=>{const{prefixCls:u,style:a,className:o,checked:$,onChange:p,onClick:F}=e,H=Q(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:X,tag:Z}=h.useContext(k.E_),U=J=>{p==null||p(!$),F==null||F(J)},M=X("tag",u),[ee,ne,P]=B(M),oe=A()(M,`${M}-checkable`,{[`${M}-checkable-checked`]:$},Z==null?void 0:Z.className,o,ne,P);return ee(h.createElement("span",Object.assign({},H,{ref:s,style:Object.assign(Object.assign({},a),Z==null?void 0:Z.style),className:oe,onClick:U})))}),l=r(98719);const g=e=>(0,l.Z)(e,(s,u)=>{let{textColor:a,lightBorderColor:o,lightColor:$,darkColor:p}=u;return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:a,background:$,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:p,borderColor:p},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var t=(0,N.bk)(["Tag","preset"],e=>{const s=v(e);return g(s)},C);function i(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const L=(e,s,u)=>{const a=i(u);return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:e[`color${u}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var _=(0,N.bk)(["Tag","status"],e=>{const s=v(e);return[L(s,"success","Success"),L(s,"processing","Info"),L(s,"error","Error"),L(s,"warning","Warning")]},C),ue=function(e,s){var u={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(u[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)s.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(u[a[o]]=e[a[o]]);return u};const w=h.forwardRef((e,s)=>{const{prefixCls:u,className:a,rootClassName:o,style:$,children:p,icon:F,color:H,onClose:X,bordered:Z=!0,visible:U}=e,M=ue(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:ee,direction:ne,tag:P}=h.useContext(k.E_),[oe,J]=h.useState(!0),K=(0,S.Z)(M,["closeIcon","closable"]);h.useEffect(()=>{U!==void 0&&J(U)},[U]);const ie=(0,W.o2)(H),se=(0,W.yT)(H),le=ie||se,me=Object.assign(Object.assign({backgroundColor:H&&!le?H:void 0},P==null?void 0:P.style),$),E=ee("tag",u),[T,m,x]=B(E),y=A()(E,P==null?void 0:P.className,{[`${E}-${H}`]:le,[`${E}-has-color`]:H&&!le,[`${E}-hidden`]:!oe,[`${E}-rtl`]:ne==="rtl",[`${E}-borderless`]:!Z},a,o,m,x),f=re=>{re.stopPropagation(),X==null||X(re),!re.defaultPrevented&&J(!1)},[,ge]=(0,b.Z)((0,b.w)(e),(0,b.w)(P),{closable:!1,closeIconRender:re=>{const Ce=h.createElement("span",{className:`${E}-close-icon`,onClick:f},re);return(0,Y.wm)(re,Ce,q=>({onClick:ve=>{var he;(he=q==null?void 0:q.onClick)===null||he===void 0||he.call(q,ve),f(ve)},className:A()(q==null?void 0:q.className,`${E}-close-icon`)}))}}),O=typeof M.onClick=="function"||p&&p.type==="a",ce=F||null,pe=ce?h.createElement(h.Fragment,null,ce,p&&h.createElement("span",null,p)):p,fe=h.createElement("span",Object.assign({},K,{ref:s,className:y,style:me}),pe,ge,ie&&h.createElement(t,{key:"preset",prefixCls:E}),se&&h.createElement(_,{key:"status",prefixCls:E}));return T(O?h.createElement(I.Z,{component:"Tag"},fe):fe)});w.CheckableTag=n;var ae=w}}]);
